<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Nick Larson - Switching from Wordpress to Middleman</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/posts/feed.xml" />
    <link href="/stylesheets/normalize.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/bootstrap.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/styles.css" rel="stylesheet" type="text/css" /><link href="/stylesheets/syntax.css" rel="stylesheet" type="text/css" />
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>

    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
      <ul>
    </div>
  </div>
</nav>


    <!-- Page Header -->
    <header class="intro-header">
      <div class="container">
        <div class="row">
          <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1">
            <div class="site-heading">
              <h1>Nick Larson</h1>
              <hr class="small">
              <span class="subheading">Software Engineer.</span>
            </div>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Content -->
    <div class="container">
      <div class="row">
        <div class="col-lg-10 col-lg-offset-1 col-md-10 col-md-offset-1 padded">
            <div class='post-preview'>
    <h1 class="post-title">Switching from Wordpress to Middleman</h1>
    <h4 class="post-meta">August  7, 2015</h4>
    <hr>
  </div>
    <p>I recently completely redesigned this site and rebuilt it using Middleman, a static site generator built with Ruby. Along with the redesign, the site is now hosted for free on GitHub Pages.</p>

<h2>Background</h2>

<p>This site was previously a WordPress blog hosted on HostGator. Although there wasn&rsquo;t anything <em>terrible</em> about Wordpress, it was kind of annoying to maintain, so I rarely made changes to the design or page layouts. The page load speed also left something to be desired.</p>

<p>Admittedly, I&rsquo;m not a WordPress expert, so this was probably on me. The thing is, I didn&rsquo;t really <em>want</em> to be a Wordpress expert. I didn’t really <em>need</em> WordPress for what I was doing and I didn&rsquo;t want to spend a lot of time learning how to configure it correctly.</p>

<p>What I really wanted to do was quickly manage my design so I could focus on writing. Enter static site generators.</p>

<h2>Why Middleman?</h2>

<p>There are a <a href="https://github.com/pinceladasdaweb/Static-Site-Generators">crap load</a> of static site generators out there, so Why did I choose Middleman?</p>

<p>When I started <em>shopping</em> for the right tool for me, there were several things I was looking for:</p>

<ul>
<li>The ability to write my blog posts in Markdown. I don&rsquo;t enjoy using WYSIWIG editors. At all.</li>
<li>Support for Github Pages and the ability to quickly deploy from the command line.</li>
<li>Support for any front-end tools I feel like using (haml, erb, coffeescript, sass, etc.)</li>
</ul>

<p>I also wanted a static site generator to be built in a language I&rsquo;m familiar with. I&rsquo;m a Ruby on Rails developer so Middleman and Jekyll were my top choices(since they are both built on Ruby).</p>

<p>Middleman and Jekyll both offer roughly the same features and the biggest difference I noticed was what comes out of the box by default.</p>

<p>For example, Jekyll includes built-in support for blogging and Github Pages while Middleman offers support for both through extensions that need to be activated. Similarly, Middleman includes <a href="https://github.com/sstephenson/sprockets">Sprockets</a> by default, while Jekyll offers support through an extension.</p>

<p>I played around with both and ultimately ended up choosing Middleman simply because I liked the workflow more. Middleman bears a striking resemblence to working on a rails project.</p>

<h2>Middleman Installation</h2>

<p>Middleman is distributed using the RubyGems package manager. This means you will need both the Ruby language runtime installed and RubyGems to begin using Middleman.</p>

<p>For the purposes of this tutorial, I’m going to assume you&rsquo;re comfortable working from the command line and are familiar with install gems.</p>

<p>Let’s start by installing the Middleman gem:</p>
<pre class="highlight shell"><code>  <span class="nv">$ </span>gem install middleman
</code></pre>

<p>This will install Middleman, its dependencies and the command-line tools for using Middleman.</p>

<p>It may take a few minutes so be patient.</p>

<h2>Generate a Middleman project</h2>

<p>Once Middleman has finished installing, we can create a new project with:</p>
<pre class="highlight shell"><code>  <span class="nv">$ </span>middleman init name_of_project options
</code></pre>

<p>To view view what options are available when creating a new Middleman project, run init with the <code>--help</code> flag:</p>
<pre class="highlight shell"><code>  <span class="nv">$ </span>middleman init --help

  Usage:
    middleman init NAME <span class="o">[</span>options]

  Options:
    -T, <span class="o">[</span>--template<span class="o">=</span>TEMPLATE]                  <span class="c"># Use a project template: default, html5, mobile, smacss, empty</span>
                                               <span class="c"># Default: default</span>
        <span class="o">[</span>--css-dir<span class="o">=</span>CSS_DIR]                    <span class="c"># The path to the css files</span>
        <span class="o">[</span>--js-dir<span class="o">=</span>JS_DIR]                      <span class="c"># The path to the javascript files</span>
        <span class="o">[</span>--images-dir<span class="o">=</span>IMAGES_DIR]              <span class="c"># The path to the image files</span>
        <span class="o">[</span>--rack], <span class="o">[</span>--no-rack]                  <span class="c"># Include a config.ru file</span>
        <span class="o">[</span>--skip-gemfile], <span class="o">[</span>--no-skip-gemfile]  <span class="c"># Don't create a Gemfile</span>
    -B, <span class="o">[</span>--skip-bundle], <span class="o">[</span>--no-skip-bundle]    <span class="c"># Don't run bundle install</span>
        <span class="o">[</span>--skip-git], <span class="o">[</span>--no-skip-git]          <span class="c"># Skip Git ignores and keeps</span>
        <span class="o">[</span>--force]                              <span class="c"># Overwrite existing files without any question</span>
</code></pre>

<p>Let&rsquo;s create a project with using the default settings:</p>
<pre class="highlight shell"><code>  <span class="nv">$ </span>middleman init my_awesome_project
</code></pre>

<p>Once that is complete, we can <code>cd</code> into the newly created <code>my_awesome_project/</code> directory and start up the Middleman server:</p>
<pre class="highlight shell"><code><span class="gp">$ </span>bundle <span class="nb">exec </span>middleman server
</code></pre>

<p>Once the server is up and running we can visit <code>http://localhost:4567/</code> in our browser to view our project:</p>

<p><img alt="New Middleman Project" class="img-responsive center-block" src="/posts/2015/08/07/switching-from-wordpress-to-middleman/New-Middleman-Project-Page.jpg" /></p>

<p>Our project directory will look something like this:</p>
<pre class="highlight shell"><code>.
├── .gitignore
├── Gemfile
├── Gemfile.lock
├── config.rb
└── <span class="nb">source</span>
    ├── images
    │   ├── background.png
    │   └── middleman.png
    ├── index.html.erb
    ├── javascripts
    │   └── all.js
    ├── layouts
    │   └── layout.erb
    └── stylesheets
        ├── all.css
        └── normalize.css
</code></pre>

<p>The <code>config.rb</code> file is where most project configuration will be done. This file contains commented documentation on how to enable some features. We can navigate to <code>http://localhost:4567/__middleman/config/</code> to see all of the settings and extensions available.</p>

<p>The <code>source/</code> directory contains the main website source files to be built, including templates javascript, CSS and images.</p>

<p>The <code>build/</code> directory is where our static website files will be compiled and exported to. This folder doesn&rsquo;t exist yet because we haven&rsquo;t run the <code>middleman build</code> command, so let&rsquo;s do that now.</p>
<pre class="highlight shell"><code><span class="gp">$ </span>bundle <span class="nb">exec </span>middleman build
</code></pre>

<p>Now our project contains the <code>build/</code> directory:</p>
<pre class="highlight shell"><code>── build
   ├── images
   │   ├── background.png
   │   └── middleman.png
   ├── index.html
   ├── javascripts
   │   └── all.js
   └── stylesheets
       ├── all.css
       └── normalize.css
</code></pre>

<h2>Digging Deeper</h2>

<p>We now have the basics of Middleman covered (creating, previewing and building the project), but there’s a lot more we can do. I&rsquo;ll go over a few features of Middleman, but be sure to check out the <a href="https://middlemanapp.com/basics/install/">official documentation</a> to learn more.</p>

<h3>Adding More Pages</h3>

<p>Our new project contains only one page, <code>index.html.erb</code>, but adding additional pages is an easy as creating <code>.html.erb</code> files in the <code>source/</code> directory. Middleman also ships with support for <a href="http://haml.info/">Haml</a> out of box, so feel free to use that if you prefer.</p>

<h3>Layouts</h3>

<p>When we created our project, a <code>layouts/layout.erb</code> file was created:</p>
<pre class="highlight erb"><code><span class="cp">&lt;!doctype html&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"utf-8"</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- Always force latest IE rendering engine or request Chrome Frame --&gt;</span>
    <span class="nt">&lt;meta</span> <span class="na">content=</span><span class="s">"IE=edge,chrome=1"</span> <span class="na">http-equiv=</span><span class="s">"X-UA-Compatible"</span><span class="nt">&gt;</span>

    <span class="c">&lt;!-- Use title if it's in the page YAML frontmatter --&gt;</span>
    <span class="nt">&lt;title&gt;</span><span class="cp">&lt;%=</span> <span class="n">current_page</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">title</span> <span class="o">||</span> <span class="s2">"The Middleman"</span> <span class="cp">%&gt;</span><span class="nt">&lt;/title&gt;</span>

    <span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"normalize"</span><span class="p">,</span> <span class="s2">"all"</span> <span class="cp">%&gt;</span>
    <span class="cp">&lt;%=</span> <span class="n">javascript_include_tag</span>  <span class="s2">"all"</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/head&gt;</span>

  <span class="nt">&lt;body</span> <span class="na">class=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">page_classes</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
    <span class="cp">&lt;%=</span> <span class="k">yield</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>

<p>This is the layout for our project and all pages will use it by default. We can define any shared content(headers, footers, etc.) here and any pages using this layout will add their contents in the <code>yield</code> call.</p>

<p>Middleman supports multiple layouts as well as nested layouts. Read more <a href="https://middlemanapp.com/basics/layouts/">here</a>.</p>

<h3>Frontmatter</h3>

<p>If we look at the <code>index.html.erb</code> file, we will see this:</p>
<pre class="highlight erb"><code>---
title: Welcome to Middleman
---
</code></pre>

<p>This is our frontmatter. Frontmatter is page-specific data that we can specify in YAML or JSON format. In the example above, we could use <code>current_page.data.title</code> to access &lsquo;Welcome to Middleman&rsquo;.</p>

<p>We can also define other data, such as lists, in the frontmatter:</p>
<pre class="highlight erb"><code>---
people_named_nick:
  - Nick Cage
  - Nick Larson
  - Nick Offerman
---

<span class="nt">&lt;h1&gt;</span>People Named Nick<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="n">current_page</span><span class="p">.</span><span class="nf">data</span><span class="p">.</span><span class="nf">people_named_nick</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">f</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;</span><span class="cp">&lt;%=</span> <span class="n">f</span> <span class="cp">%&gt;</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span>

</code></pre>

<p>Lastly, we can define a custom layout for a single page with:</p>
<pre class="highlight erb"><code>---
layout: 'my_awesome_layout'
---
</code></pre>

<h3>Template Helpers</h3>

<p>Template helpers are methods which we can used to simplify common HTML tasks. Most of the basic methods should look familiar to anyone who has use Ruby on Rails.</p>

<p>These helpers are built on the Padrino framework. I&rsquo;ll list a few commone helpers here, but you can view the full list in the <a href="http://www.padrinorb.com/guides/application-helpers">Padrino Documentation</a>.</p>

<p><strong>To display a link:</strong></p>
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s1">'Cat Pictures'</span><span class="p">,</span> <span class="s1">'/cats.html'</span> <span class="cp">%&gt;</span>
</code></pre>

<p><strong>To display an image:</strong></p>
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">image_tag</span> <span class="s1">'orange-cat.png'</span> <span class="cp">%&gt;</span>
</code></pre>

<p>(Middleman will look for this image in the images directory by default)</p>

<p><strong>To link to external stylesheets(as seen in <code>layouts/layout.erb</code>):</strong></p>
<pre class="highlight erb"><code><span class="cp">&lt;%=</span> <span class="n">stylesheet_link_tag</span> <span class="s2">"normalize"</span><span class="p">,</span> <span class="s2">"all"</span> <span class="cp">%&gt;</span>
</code></pre>

<h3>Directory Indexes(Pretty Urls)</h3>

<p>By default, creating an <code>about.html.erb</code> file in the <code>source/</code> folder will be output as <code>about.html</code> when we build the project. This page would then be accessed by navigating to:</p>
<pre class="highlight plaintext"><code>http://localhost:4567/about.html
</code></pre>

<p>If the Directory Indexes extension is activated, the <code>about.html.erb</code> page will instead be output as <code>about/index.html</code> when we build the project and would be accessed by navigating to:</p>
<pre class="highlight plaintext"><code>http://localhost:4567/about/
</code></pre>

<p>Add the following to the <code>config.rb</code> file to activate Directory Indexes:</p>
<pre class="highlight ruby"><code><span class="n">activate</span> <span class="ss">:directory_indexes</span>
</code></pre>

<p><strong>Note:</strong> Your web server must support &ldquo;index files&rdquo;. Read more <a href="https://middlemanapp.com/advanced/pretty_urls/">here</a>.</p>

<h3>Markdown</h3>

<p>Aside from ERb and Haml, we can also write our page content in Markdown. If we create a <code>some-page.html.markdown</code> file, Middleman will render <code>some-page.html</code> using whatever Markdown engine we specify. Middleman uses Kramdown by default, but it can easily be changed. For example, to install RedCarpet, we would install the RedCarpet gem by adding this to our Gemfile:</p>
<pre class="highlight plaintext"><code>gem 'redcarpet'
</code></pre>

<p>We would then need to set it as our default Markdown engine in <code>config.rb</code>:</p>
<pre class="highlight ruby"><code><span class="n">set</span> <span class="ss">:markdown_engine</span><span class="p">,</span> <span class="ss">:redcarpet</span>
</code></pre>

<h3>Blogging</h3>

<p><strong>Note:</strong> Middleman has an official extension to support blogging, articles and tagging. The <code>middleman-blog</code> extension can be added to an existing project by specifying the <code>middleman-blog</code> gem in the Gemfile:</p>
<pre class="highlight ruby"><code><span class="n">gem</span> <span class="s2">"middleman-blog"</span>
</code></pre>

<p>After running <code>bundle install</code>, we need to activate the extension in <code>config.rb</code>:</p>
<pre class="highlight ruby"><code><span class="n">activate</span> <span class="ss">:blog</span> <span class="k">do</span> <span class="o">|</span><span class="n">blog</span><span class="o">|</span>
  <span class="c1"># blog options go here</span>
<span class="k">end</span>
</code></pre>

<p>There are several options for customizing our blog. Navigate to <code>http://localhost:4567/__middleman/config/#extension</code> to see the available options.</p>

<h2>To Be Continued&hellip;</h2>

<p>There are several other features &amp; options that I haven&rsquo;t even mentioned yet, such as:</p>

<ul>
<li>LiveReload</li>
<li>Syntax Highlighting</li>
<li>Deploying to Github Pages</li>
<li>Advanced blog configuration</li>
</ul>

<p>I will touch on these topics in future posts. Thanks for reading!</p>

  <div class='disqus_container'>
    <div id='disqus_thread'>
  <script>
    var disqus_shortname = 'nlarso';
    var disqus_identifier = '#{current_article.url}';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
</div>
<noscript>
  Please enable JavaScript to view the
  <a rel="nofollow" href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>

  </div>

        </div>
      </div>
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
          <li>
<a href="https://twitter.com/iamrobotnik">            <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
          </span>
</a>          </li>
          <li>
<a href="https://facebook.com/iamrobotnik">            <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
          </span>
</a>          </li>
          <li>
<a href="https://github.com/nlarso">            <span class="fa-stack fa-lg">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-github fa-stack-1x fa-inverse"></i>
          </span>
</a>          </li>
        </ul>
        <p class="copyright text-muted">Copyright &copy; www.nick-larson.net 2015</p>
      </div>
    </div>
  </div>
</footer>


    <script src="/javascripts/jquery.min.js" type="text/javascript"></script><script src="/javascripts/bootstrap.min.js" type="text/javascript"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-29803111-1', 'auto');
      ga('send', 'pageview');

    </script>
  </body>
</html>
